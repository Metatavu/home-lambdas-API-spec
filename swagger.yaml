openapi: 3.0.3
info:
  title: Timebank MyWork Forecast lambda functions
  description: Timebank MyWork Forecast lambda functions
  version: 1.0.0
  
security:
  - bearerAuth: []
  
paths:
  
  "/allocations":
    get:
      operationId: listAllocations
      summary: Lists Forecast allocations
      description: |
        Lists Forecast allocations
      tags:
        - Allocations
      parameters:
        - name: personId
          required: false
          in: query
          description: Retrieve allocations for person
          schema:
            type: integer
        - name: projectId
          required: false
          in: query
          description: Retrieve allocations for project
          schema:
            type: integer
        - name: startDate
          required: false
          in: query
          description: Retrieve allocations after given date
          schema:
            type: string
            format: date
        - name: endDate
          required: false
          in: query
          description: Retrieve allocations before given date
          schema:
            type: string
            format: date
      responses:
        "200":
          description: A list of Forecast allocations
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Allocations"

  "/projects":
    get:
      operationId: listProjects
      summary: Lists Forecast projects
      description: |
        Lists Forecast projects
      tags:
        - Projects
      parameters:
        - name: startDate
          required: false
          in: query
          description: Retrieve allocations after given date
          schema:
            type: string
            format: date
        - name: endDate
          required: false
          in: query
          description: Retrieve allocations before given date
          schema:
            type: string
            format: date
      responses:
        "200":
          description: A list of Forecast projects
          content:
            application/json;charset=utf-8:
              schema:
                type: array
                items: 
                  $ref: "#/components/schemas/Projects"
                  
  "/projects/{projectId}/sprints":
    get:
      operationId: listProjectSprints
      summary: List project sprints
      description: |
        Lists Forecast project sprint
      tags:
        - projectSprints
      parameters:
      - name: projectId
        required: true
        in: path
        description: Forecast project id
        schema:
            type: integer
      responses:
        "200":
          description: A list of project sprints
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Sprints"
  
  "/tasks":
    get:
      operationId: listTasks
      summary: Lists Forecast tasks
      description: |
        Lists Forecast tasks
      tags:
        - ProjectTasks
      parameters:
        - name: projectId
          required: false
          in: query
          description: Forecast project id
          schema:
            type: integer
      responses:
        "200":
          description: A list of Forecast tasks
          content:
            application/json;charset=utf-8:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Tasks"

  "/timeEntries":
    get:
      operationId: listTimeEntries
      summary: List time entries
      description: |
        Lists Forecast project time entries
      tags:
        - timeEntries
      parameters:
      - name: projectId
        required: true
        in: query
        description: Forecast project id
        schema:
            type: integer
      responses:
        "200":
          description: A list of time entries
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/TimeEntries"
  
components:
      
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      
  schemas:
      
    Allocations:
      type: object
      description: Allocation data from Forecast API
      properties:
        id:
          type: integer
        project:
          type: integer
        person: 
          type: integer
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        monday:
          type: integer
        tuesday:
          type: integer
        wednesday:
          type: integer
        thursday:
          type: integer
        friday:
          type: integer
        saturday:
          type: integer
        sunday:
          type: integer
        notes:
          type: string
          
    Projects:
      type: object
      description: Project data from Forecast API
      properties:
        id: 
          type: integer
        name:
          type: string
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
          
    Tasks:
      type: object
      description: Project task data from Forecast API
      properties:
        id:
          type: string
        title:
          type: string
        description:
          type: string
        projectId:
          type: integer
        remaining:
          type: integer
        estimate:
          type: integer
        startDate:
          type: string
          format: date
        endDate:
          type: string
          format: date
        highPriority:
          type: boolean
        assignedPersons:
          type: array
          items: 
            type: integer
            
    Sprints:
      type: object
      description: Project sprint data from Forecast API
      properties:
        id:
          type: integer
        name:
          type: string
        startDate: 
          type: string
          format: date
        endDate:
          type: string
          format: date
          
    TimeEntries:
      type: object
      description: Project time entries from Forecast API
      properties:
        id: 
          type: integer
        person:
          type: integer
        project:
          type: integer
        task:
          type: integer
        timeRegistered:
          type: integer
